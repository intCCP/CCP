/* Formatted on 21/07/2014 18:43:06 (QP5 v5.227.12220.39754) */
CREATE OR REPLACE FORCE VIEW MCRE_OWN.V_MCRES_APP_SP_LEGALI_ESTERNI
(
   ID_LEGALE,
   COD_LEGALE,
   INTESTAZIONE,
   PARTITA_IVA,
   PARTITA_IVA_UE,
   PARTITA_IVA_EXTRA_UE,
   IBAN1,
   IBAN2,
   IBAN3,
   IBAN4,
   IBAN5,
   IBAN6,
   IBAN7,
   IBAN8,
   IBAN9,
   IBAN10,
   ABI,
   CAB,
   CC,
   FLAG_IN_ALBO,
   COD_FISCALE,
   ID_BANCA,
   ID_PRESIDIO,
   INIZIO_ALBO,
   FINE_ALBO,
   COGNOME,
   NOME,
   COD_SAP_FORNITORE,
   VAL_LEGALE_INDIRIZZO,
   VAL_LEGALE_CITTA,
   VAL_LEGALE_PROV,
   VAL_LEGALE_CAP,
   VAL_LEGALE_TELEF,
   VAL_LEGALE_FAX,
   VAL_LEGALE_EMAIL,
   VAL_LEGALE_ABI,
   VAL_LEGALE_CAB,
   VAL_LEGALE_CONTO,
   VAL_LEGALE_CIN,
   COD_SPECIALIZZAZIONE,
   VAL_LEGALE_IND_PROC_GEN,
   DTA_PROCURA_GEN,
   COD_NUM_REPERTORIO_PG,
   VAL_NOMINATIVO_NOTAIO,
   VAL_NOTE,
   FLG_OBBLIGO_AUTORIZ,
   FLG_VISUALIZZA,
   COD_CITTA,
   FLG_CONVENZ,
   DESC_SPECIALIZZAZIONE,
   VAL_AUTORIZZAZIONE_CENS,
   DTA_AUTORIZZAZIONE_CENS,
   VAL_NOTE_ALBO_CONV,
   COD_ID_CONTRATTO,
   DTA_CONTRATTO,
   DTA_SCAD_CONTRATTO,
   COD_ID_CONVENZIONE,
   DTA_SCAD_CONVENZIONE,
   VAL_FORO1,
   VAL_FORO2,
   VAL_FORO3,
   VAL_FORO4,
   COD_USER_ID
)
AS
   SELECT L.COD_ID_LEGALE AS ID_LEGALE,
          L.COD_ID_LEGALE AS COD_LEGALE,
          L.VAL_LEGALE_COGNOME || ' ' || L.VAL_LEGALE_NOME AS INTESTAZIONE,
          L.VAL_LEGALE_PIVA AS PARTITA_IVA,
          --AP 16/10/2012 AGGIUNTI UE - EXTRA UE
          L.VAL_LEGALE_PIVA_UE PARTITA_IVA_UE,
          L.VAL_LEGALE_PIVA_EXTRA_UE PARTITA_IVA_EXTRA_UE,
          --AP 28/09/2012 AGGIUNTA IBAN DA 1 A 10
          L.VAL_IBAN1 AS IBAN1,
          L.VAL_IBAN2 AS IBAN2,
          L.VAL_IBAN3 AS IBAN3,
          L.VAL_IBAN4 AS IBAN4,
          L.VAL_IBAN5 AS IBAN5,
          L.VAL_IBAN6 AS IBAN6,
          L.VAL_IBAN7 AS IBAN7,
          L.VAL_IBAN8 AS IBAN8,
          L.VAL_IBAN9 AS IBAN9,
          L.VAL_IBAN10 AS IBAN10,
          L.COD_ABI AS ABI,
          L.VAL_LEGALE_CAB AS CAB,
          L.VAL_LEGALE_CONTO AS CC,
          --AP 25/09/2012
          --NVL2(A.DTA_INIZIO_ALBO,'S','N') AS FLAG_IN_ALBO,
          L.FLG_ALBO AS FLAG_IN_ALBO,
          L.VAL_LEGALE_CODFISC AS COD_FISCALE,
          L.COD_ABI AS ID_BANCA,                                      --Filtro
          L.COD_PRESIDIO AS ID_PRESIDIO,                              --Filtro
          --AP2 5/09/2012
          L.DTA_INIZIO_ALBO AS INIZIO_ALBO,                           --Filtro
          L.DTA_FINE_ALBO AS FINE_ALBO,                               --Filtro
          --A.DTA_INIZIO_ALBO AS INIZIO_ALBO, --Filtro
          --A.DTA_FINE_ALBO AS FINE_ALBO, --Filtro
          L.VAL_LEGALE_COGNOME AS COGNOME,                            --Filtro
          L.VAL_LEGALE_NOME AS NOME,                                  --Filtro
          -- AP 3/10/2012
          --L.DTA_CANCELLAZIONE AS DATA_CANCELLAZIONE,
          L.COD_SAP_FORNITORE,
          L.VAL_LEGALE_INDIRIZZO,
          L.VAL_LEGALE_CITTA,
          L.VAL_LEGALE_PROV,
          L.VAL_LEGALE_CAP,
          L.VAL_LEGALE_TELEF,
          L.VAL_LEGALE_FAX,
          L.VAL_LEGALE_EMAIL,
          L.VAL_LEGALE_ABI,
          L.VAL_LEGALE_CAB,
          L.VAL_LEGALE_CONTO,
          L.VAL_LEGALE_CIN,
          L.COD_SPECIALIZZAZIONE,
          L.VAL_LEGALE_IND_PROC_GEN,
          L.DTA_PROCURA_GEN,
          L.COD_NUM_REPERTORIO_PG,
          L.VAL_NOMINATIVO_NOTAIO,
          L.VAL_NOTE,
          L.FLG_OBBLIGO_AUTORIZ,
          L.FLG_VISUALIZZA,
          L.COD_CITTA,
          L.FLG_CONVENZ,
          SPEC.DESC_SPECIALIZZAZIONE,
          L.VAL_AUTORIZZAZIONE_CENS,
          L.DTA_AUTORIZZAZIONE_CENS,
          L.VAL_NOTE_ALBO_CONV,
          L.COD_ID_CONTRATTO,
          L.DTA_CONTRATTO,
          L.DTA_SCAD_CONTRATTO,
          L.COD_ID_CONVENZIONE,
          L.DTA_SCAD_CONVENZIONE,
          L.VAL_FORO1,
          L.VAL_FORO2,
          L.VAL_FORO3,
          L.VAL_FORO4,
          L.COD_USER_ID
     FROM T_MCRES_APP_LEGALI_ESTERNI L
          LEFT JOIN T_MCRES_CL_SPECIALIZZAZIONE SPEC
             ON (L.COD_SPECIALIZZAZIONE = SPEC.COD_SPECIALIZZAZIONE)
    --AP 25/09/2012
    --LEFT OUTER JOIN T_MCRES_APP_LEGALI_ALBOCONVENZ A ON
    -- L.COD_ID_LEGALE = A.COD_LEGALE
    WHERE L.FLG_ACTIVE = 1;
